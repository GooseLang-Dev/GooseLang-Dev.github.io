"use strict";(self.webpackChunkgooselang_docs=self.webpackChunkgooselang_docs||[]).push([[812],{8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>a});var s=i(6540);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}},8927:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"plugin/goosenlp-architecture","title":"GooseNLP Architecture Design","description":"Table of Contents","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/plugin/goosenlp-architecture.md","sourceDirName":"plugin","slug":"/plugin/goosenlp-architecture","permalink":"/dev/plugin/goosenlp-architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/GooseLang-Dev/gooselang.github.io/tree/main/i18n/en/docusaurus-plugin-content-docs/current/plugin/goosenlp-architecture.md","tags":[],"version":"current","lastUpdatedBy":"BruceWJ","lastUpdatedAt":1754286127000,"sidebarPosition":2,"frontMatter":{"title":"GooseNLP Architecture Design","sidebar_position":2,"id":"goosenlp-architecture"},"sidebar":"devSidebar","previous":{"title":"Plugin Summary","permalink":"/dev/plugin/"}}');var r=i(4848),t=i(8453);const l={title:"GooseNLP Architecture Design",sidebar_position:2,id:"goosenlp-architecture"},a="GooseNLP Architecture Design and Integration Process",o={},c=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Project Background and Requirements",id:"project-background-and-requirements",level:2},{value:"Background",id:"background",level:3},{value:"Design Goals",id:"design-goals",level:3},{value:"Architecture Design",id:"architecture-design",level:2},{value:"Overall Architecture",id:"overall-architecture",level:3},{value:"Core Components",id:"core-components",level:3},{value:"1. GooseLang System Side",id:"1-gooselang-system-side",level:4},{value:"2. GooseNLP Plugin Side",id:"2-goosenlp-plugin-side",level:4},{value:"3. spaCy Python Service",id:"3-spacy-python-service",level:4},{value:"Communication Protocol",id:"communication-protocol",level:3},{value:"WebSocket Message Format",id:"websocket-message-format",level:4},{value:"Core Features",id:"core-features",level:2},{value:"1. Intelligent Language Detection",id:"1-intelligent-language-detection",level:3},{value:"2. Phrase Extraction",id:"2-phrase-extraction",level:3},{value:"3. Interactive UI Components",id:"3-interactive-ui-components",level:3},{value:"4. Efficient Caching Mechanism",id:"4-efficient-caching-mechanism",level:3},{value:"Integration Process",id:"integration-process",level:2},{value:"Phase 1: Basic Architecture Setup",id:"phase-1-basic-architecture-setup",level:3},{value:"Phase 2: Core Feature Implementation",id:"phase-2-core-feature-implementation",level:3},{value:"Phase 3: Optimization and Issue Resolution",id:"phase-3-optimization-and-issue-resolution",level:3},{value:"Key Issues and Solutions",id:"key-issues-and-solutions",level:2},{value:"1. Content Hash Mismatch Causing Cache Invalidation",id:"1-content-hash-mismatch-causing-cache-invalidation",level:3},{value:"2. Irregular CSS Management",id:"2-irregular-css-management",level:3},{value:"3. Overly Simple Language Detection",id:"3-overly-simple-language-detection",level:3},{value:"4. Virtual Environment EBADF Error",id:"4-virtual-environment-ebadf-error",level:3},{value:"5. Word Tagging Not Intelligent Enough",id:"5-word-tagging-not-intelligent-enough",level:3},{value:"Design Advantages",id:"design-advantages",level:2},{value:"1. Plugin Architecture",id:"1-plugin-architecture",level:3},{value:"2. High-Performance Design",id:"2-high-performance-design",level:3},{value:"3. User Experience Optimization",id:"3-user-experience-optimization",level:3},{value:"4. Scalability",id:"4-scalability",level:3},{value:"5. Robustness",id:"5-robustness",level:3},{value:"Summary",id:"summary",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"goosenlp-architecture-design-and-integration-process",children:"GooseNLP Architecture Design and Integration Process"})}),"\n",(0,r.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#project-background-and-requirements",children:"Project Background and Requirements"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#architecture-design",children:"Architecture Design"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#core-features",children:"Core Features"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#integration-process",children:"Integration Process"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#key-issues-and-solutions",children:"Key Issues and Solutions"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#design-advantages",children:"Design Advantages"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"project-background-and-requirements",children:"Project Background and Requirements"}),"\n",(0,r.jsx)(n.h3,{id:"background",children:"Background"}),"\n",(0,r.jsx)(n.p,{children:"The GooseLang system requires powerful Natural Language Processing (NLP) capabilities to enhance the readability and comprehension of materials. Main requirements include:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Part-of-Speech Tagging (POS)"}),": Help users understand the grammatical role of each word in text"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Named Entity Recognition (NER)"}),": Identify entities like person names, locations, organizations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Dependency Parsing"}),": Understand grammatical relationships between words"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Multi-language Support"}),": Support English, Chinese, Spanish, and other languages"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Interactive Display"}),": Provide beautiful frontend interface with hover and click interactions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"High-Performance Caching"}),": Avoid reprocessing identical content to improve response speed"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"design-goals",children:"Design Goals"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Plugin Architecture"}),": Integrate as an independent plugin into the GooseLang system"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"High Availability"}),": Support reconnection and error recovery"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Scalability"}),": Easy to add new NLP features and language support"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"User-Friendly"}),": Provide clean and beautiful interactive interface"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"architecture-design",children:"Architecture Design"}),"\n",(0,r.jsx)(n.h3,{id:"overall-architecture",children:"Overall Architecture"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        GooseLang System                          \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                 \u2502\n\u2502  \u2502   Frontend UI   \u2502\u2500\u2500\u2500\u2500\u25b6\u2502   NLP Handler    \u2502                 \u2502\n\u2502  \u2502 (Material List) \u2502     \u2502  (/nlp/create)   \u2502                 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                 \u2502\n\u2502                                   \u2502                             \u2502\n\u2502                          WebSocket \u2502                             \u2502\n\u2502                                   \u25bc                             \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                  \u2502\n\u2502  \u2502          MongoDB (nlp_cache)             \u2502                  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                    \u2502\n                           WebSocket \u2502\n                                    \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        GooseNLP Plugin                           \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                 \u2502\n\u2502  \u2502  GooseLangHost  \u2502\u2500\u2500\u2500\u2500\u25b6\u2502   NLPService     \u2502                 \u2502\n\u2502  \u2502  (WebSocket)    \u2502     \u2502                  \u2502                 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                 \u2502\n\u2502                                   \u2502                             \u2502\n\u2502                              HTTP \u2502                             \u2502\n\u2502                                   \u25bc                             \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                  \u2502\n\u2502  \u2502         spaCy Python Server              \u2502                  \u2502\n\u2502  \u2502        (127.0.0.1:1407)                 \u2502                  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(n.h3,{id:"core-components",children:"Core Components"}),"\n",(0,r.jsx)(n.h4,{id:"1-gooselang-system-side",children:"1. GooseLang System Side"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"NLP Handler"})," (",(0,r.jsx)(n.code,{children:"packages/gooselang/src/handler/nlp.ts"}),")"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Processes frontend NLP requests"}),"\n",(0,r.jsx)(n.li,{children:"Manages MongoDB cache"}),"\n",(0,r.jsx)(n.li,{children:"Communicates with plugin via WebSocket"}),"\n",(0,r.jsx)(n.li,{children:"Uses content hash for cache key management"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Frontend UI"})," (",(0,r.jsx)(n.code,{children:"packages/ui-default/pages/problem_detail.page.tsx"}),")"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"NLP functionality integration in material list pages"}),"\n",(0,r.jsx)(n.li,{children:"Interactive POS tagging display"}),"\n",(0,r.jsx)(n.li,{children:"Supports hover and click for detailed information"}),"\n",(0,r.jsx)(n.li,{children:"Automatic language detection"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"2-goosenlp-plugin-side",children:"2. GooseNLP Plugin Side"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"GooseLangHost"})," (",(0,r.jsx)(n.code,{children:"packages/goosenlp/src/hosts/gooselang.ts"}),")"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"WebSocket client implementation"}),"\n",(0,r.jsx)(n.li,{children:"Automatic reconnection mechanism"}),"\n",(0,r.jsx)(n.li,{children:"Task queue management"}),"\n",(0,r.jsx)(n.li,{children:"State synchronization"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"NLPService"})," (",(0,r.jsx)(n.code,{children:"packages/goosenlp/src/nlp.ts"}),")"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Communication with spaCy service"}),"\n",(0,r.jsx)(n.li,{children:"Memory cache management"}),"\n",(0,r.jsx)(n.li,{children:"Language validation and auto-correction"}),"\n",(0,r.jsx)(n.li,{children:"Result standardization"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Task Processor"})," (",(0,r.jsx)(n.code,{children:"packages/goosenlp/src/task.ts"}),")"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Task validation and processing"}),"\n",(0,r.jsx)(n.li,{children:"Progress reporting"}),"\n",(0,r.jsx)(n.li,{children:"Error handling"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"3-spacy-python-service",children:"3. spaCy Python Service"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"spaCy Server"})," (",(0,r.jsx)(n.code,{children:"packages/goosenlp/python/spacy_server.py"}),")"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Multi-language model management"}),"\n",(0,r.jsx)(n.li,{children:"Phrase extraction algorithms"}),"\n",(0,r.jsx)(n.li,{children:"Punctuation merging"}),"\n",(0,r.jsx)(n.li,{children:"RESTful API interface"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"communication-protocol",children:"Communication Protocol"}),"\n",(0,r.jsx)(n.h4,{id:"websocket-message-format",children:"WebSocket Message Format"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Task Creation Message"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "key": "task",\n  "task": {\n    "_id": "task_id",\n    "materialId": "material_id",\n    "content": "text content",\n    "language": "en",\n    "features": ["pos", "ner", "dep", "phrases"]\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Progress Report Message"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "key": "next",\n  "_id": "task_id",\n  "progress": 50,\n  "message": "Processing..."\n}\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Completion Message"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "key": "end",\n  "_id": "task_id",\n  "result": { /* NLP results */ },\n  "content": "original content"\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"core-features",children:"Core Features"}),"\n",(0,r.jsx)(n.h3,{id:"1-intelligent-language-detection",children:"1. Intelligent Language Detection"}),"\n",(0,r.jsx)(n.p,{children:"The system implements a character-based language detection algorithm:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"private validateAndCorrectLanguage(text: string, requestedLanguage: string): string {\n    const languagePatterns: { [key: string]: RegExp } = {\n        zh: /[\\u4e00-\\u9fa5]/,                    // Chinese\n        es: /[\xe1\xe9\xed\xf3\xfa\xf1\xfc\xc1\xc9\xcd\xd3\xda\xd1\xdc\xbf\xa1]/,               // Spanish\n        ja: /[\\u3040-\\u309f\\u30a0-\\u30ff]/,       // Japanese\n        ko: /[\\uac00-\\ud7af]/,                     // Korean\n        // ... more languages\n    };\n    // Calculate match score and select most appropriate language\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-phrase-extraction",children:"2. Phrase Extraction"}),"\n",(0,r.jsx)(n.p,{children:"Unlike simple word tagging, the system implements intelligent phrase extraction:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"def extract_phrases(doc):\n    \"\"\"Extract meaningful phrases rather than individual tokens\"\"\"\n    phrases = []\n    i = 0\n    while i < len(doc):\n        token = doc[i]\n        phrase_tokens = [i]\n        \n        # Noun phrase extraction\n        if token.pos_ in ['DET', 'ADJ']:\n            j = i + 1\n            while j < len(doc) and doc[j].pos_ in ['ADJ', 'NOUN', 'PROPN']:\n                phrase_tokens.append(j)\n                j += 1\n        \n        # Verb phrase extraction\n        elif token.pos_ in ['VERB', 'AUX']:\n            # Include auxiliary verbs, adverbs, etc.\n            # ...\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-interactive-ui-components",children:"3. Interactive UI Components"}),"\n",(0,r.jsx)(n.p,{children:"The frontend implements beautiful annotation display:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"POS Color Coding"}),": Different parts of speech use different colors"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Hover Effects"}),": Mouse hover shows detailed information"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Click to Pin"}),": Click tags to pin detailed information display"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Responsive Positioning"}),": Dropdown automatically adjusts position to avoid viewport overflow"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"4-efficient-caching-mechanism",children:"4. Efficient Caching Mechanism"}),"\n",(0,r.jsx)(n.p,{children:"Dual-layer cache design:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"MongoDB Persistent Cache"}),": Save results across sessions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Memory Cache"}),": Improve hot data access speed"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"integration-process",children:"Integration Process"}),"\n",(0,r.jsx)(n.h3,{id:"phase-1-basic-architecture-setup",children:"Phase 1: Basic Architecture Setup"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Create Plugin Structure"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Establish GooseNLP package directory"}),"\n",(0,r.jsx)(n.li,{children:"Configure TypeScript environment"}),"\n",(0,r.jsx)(n.li,{children:"Set up WebSocket communication framework"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Integrate spaCy"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Create Python virtual environment"}),"\n",(0,r.jsx)(n.li,{children:"Install multi-language models"}),"\n",(0,r.jsx)(n.li,{children:"Implement HTTP API service"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"phase-2-core-feature-implementation",children:"Phase 2: Core Feature Implementation"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Implement NLP Processing Pipeline"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Task reception and validation"}),"\n",(0,r.jsx)(n.li,{children:"spaCy calls and result processing"}),"\n",(0,r.jsx)(n.li,{children:"Cache management"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Frontend Integration"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Add toggle switch to material list pages"}),"\n",(0,r.jsx)(n.li,{children:"Implement annotation display components"}),"\n",(0,r.jsx)(n.li,{children:"Add interactive effects"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"phase-3-optimization-and-issue-resolution",children:"Phase 3: Optimization and Issue Resolution"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Cache Issue Resolution"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Resolve content hash mismatch issues"}),"\n",(0,r.jsx)(n.li,{children:"Optimize cache key generation strategy"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"UI Optimization"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Migrate from inline styles to Stylus"}),"\n",(0,r.jsx)(n.li,{children:"Optimize dropdown positioning algorithm"}),"\n",(0,r.jsx)(n.li,{children:"Add phrase grouping display"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Virtual Environment Issue Resolution"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Migrate virtual environment to user directory"}),"\n",(0,r.jsx)(n.li,{children:"Resolve EBADF errors"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"key-issues-and-solutions",children:"Key Issues and Solutions"}),"\n",(0,r.jsx)(n.h3,{id:"1-content-hash-mismatch-causing-cache-invalidation",children:"1. Content Hash Mismatch Causing Cache Invalidation"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem Description"}),":\nSystem saved NLP results using materialId+timestamp generated hash, but queried using content hash, resulting in never hitting cache."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Modified backend to ensure both save and query use content hash"}),"\n",(0,r.jsx)(n.li,{children:"Pass original content in WebSocket messages for hash calculation"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Fixed code\nonComplete: (result) => {\n    this.send({\n        key: 'end',\n        _id: taskId,\n        result,\n        materialId: task.materialId,\n        content: task.content  // Add content field\n    });\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-irregular-css-management",children:"2. Irregular CSS Management"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem Description"}),":\nInitial implementation used inline styles, not conforming to system's Stylus management standards."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Create independent ",(0,r.jsx)(n.code,{children:".styl"})," files"]}),"\n",(0,r.jsx)(n.li,{children:"Utilize webpack auto-import mechanism"}),"\n",(0,r.jsx)(n.li,{children:"Remove all inline styles"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"3-overly-simple-language-detection",children:"3. Overly Simple Language Detection"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem Description"}),":\nInitial support only for Chinese-English detection, not flexible enough."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Implement character-based multi-language detection"}),"\n",(0,r.jsx)(n.li,{children:"Support Japanese, Korean, Arabic, etc."}),"\n",(0,r.jsx)(n.li,{children:"Auto-fallback to supported languages"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"4-virtual-environment-ebadf-error",children:"4. Virtual Environment EBADF Error"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem Description"}),":\nVirtual environment in project directory caused filesystem errors."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Migrate to ",(0,r.jsx)(n.code,{children:"~/.gooselang/goosenlp/venv"})]}),"\n",(0,r.jsx)(n.li,{children:"Use standard GooseLang directory structure"}),"\n",(0,r.jsx)(n.li,{children:"Auto-create necessary directories"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"5-word-tagging-not-intelligent-enough",children:"5. Word Tagging Not Intelligent Enough"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem Description"}),":\nSimple word tagging disrupted reading experience."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Implement intelligent phrase extraction"}),"\n",(0,r.jsx)(n.li,{children:"Merge punctuation marks"}),"\n",(0,r.jsx)(n.li,{children:"Group by sentence boundaries"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"design-advantages",children:"Design Advantages"}),"\n",(0,r.jsx)(n.h3,{id:"1-plugin-architecture",children:"1. Plugin Architecture"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Independent Deployment"}),": NLP service can run and scale independently"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Loose Coupling"}),": WebSocket communication reduces system coupling"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Easy Maintenance"}),": Clear component responsibilities, easy to maintain and upgrade"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-high-performance-design",children:"2. High-Performance Design"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Dual-Layer Cache"}),": Reduce repeated computation, improve response speed"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Concurrent Processing"}),": Support multi-task concurrent processing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Streaming Transfer"}),": Support streaming processing of large texts"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"3-user-experience-optimization",children:"3. User Experience Optimization"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Beautiful UI"}),": POS color coding, interactive dropdown"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Intelligent Grouping"}),": Phrase-level annotation maintains reading fluency"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Responsive Design"}),": Adapt to different screen sizes"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"4-scalability",children:"4. Scalability"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Multi-language Support"}),": Easy to add new languages"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Feature Modularity"}),": Can flexibly add new NLP features"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Configuration Management"}),": Manage various parameters through configuration files"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"5-robustness",children:"5. Robustness"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Auto-Reconnection"}),": WebSocket auto-reconnects on disconnection"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Error Recovery"}),": Graceful error handling and fallback strategies"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"State Synchronization"}),": Real-time processing state synchronization"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(n.p,{children:"GooseNLP's design fully considers system scalability, performance, and user experience. Through plugin architecture, it achieves decoupling of NLP functionality from the main system, facilitating independent development and maintenance. The dual-layer cache mechanism ensures high performance, while intelligent phrase extraction and beautiful UI design greatly enhance user experience."}),"\n",(0,r.jsx)(n.p,{children:"Various issues encountered during integration were resolved through iterative optimization, ultimately forming a stable, efficient, and user-friendly NLP solution."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);